/**
 * angular-permission-ui
 * Extension module of angular-permission for access control within ui-router
 * @version v5.2.1 - 2017-02-02
 * @link https://github.com/Narzerus/angular-permission
 * @author Rafael Vidaurre <narzerus@gmail.com> (http://www.rafaelvidaurre.com), Blazej Krysiak <blazej.krysiak@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */


!function(a,angular,b){"use strict";function c(a){"ngInject";function b(a){return a.self.$$permissionState=function(){return a},a}a.decorator("$state",b)}function d(a,b,c,d){"ngInject";a.onStart({},function(a){function e(b,c){return c.resolveRedirectState(b).then(function(b){return a.router.stateService.target(b.state,b.params,b.options)})}function f(){b.toState=g,b.toParams=h,b.fromState=i,b.fromParams=j,b.options=k}var g=a.to(),h=a.params("to"),i=a.from(),j=a.params("from"),k=a.options();f();var l=new d(b.toState);return c.authorizeByPermissionMap(l)["catch"](function(a){return e(a,l)})})}function e(a,b,c){"ngInject";function d(a){return f(a)}function e(a){var e=b.get(a),f=new c(e);return d(f)}function f(b){var c=a.defer();return g(c,b),c.promise}function g(b,c){var d=i(c.except,c);a.all(d).then(function(a){b.reject(a[0])})["catch"](function(){h(b,c)})}function h(b,c){if(!c.only.length)return void b.resolve();var d=i(c.only,c);a.all(d).then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)})}function i(b,c){return b.length?b.map(function(b){var d=c.resolvePropertyValidity(b);return a.any(d).then(function(a){return angular.isArray(a)?a[0]:a})}):[a.reject()]}this.authorizeByPermissionMap=d,this.authorizeByStateName=e}function f(a){"ngInject";function b(b){var d=b.$$permissionState(),e=d.path;angular.forEach(e,function(b){if(c(b)){var d=new a(b.data.permissions);this.extendPermissionMap(d)}},this)}function c(a){try{return Object.prototype.hasOwnProperty.call(a.data,"permissions")}catch(b){return!1}}return b.prototype=new a,b.prototype.extendPermissionMap=function(a){a.only.length&&(this.only=this.only.concat([a.only])),a.except.length&&(this.except=this.except.concat([a.except])),angular.isDefined(a.redirectTo)&&(this.redirectTo=angular.extend({},this.redirectTo,a.redirectTo))},b}c.$inject=["$stateProvider"],d.$inject=["$transitions","PermTransitionProperties","PermStateAuthorization","PermStatePermissionMap"],e.$inject=["$q","$state","PermStatePermissionMap"],f.$inject=["PermPermissionMap"];var g=angular.module("permission.ui",["permission","ui.router"]).config(c).run(d);"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports=g.name),angular.module("permission").service("PermStateAuthorization",e),angular.module("permission.ui").factory("PermStatePermissionMap",f)}(window,window.angular);
//# sourceMappingURL=angular-permission-ui.min.js.map